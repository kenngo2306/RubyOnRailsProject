<body>
<div class="container">
  <div class="row vertical-offset-100">
    <div class="col-md-10 col-md-offset-1">
      <div class="panel panel-default">

        <div class="panel-body">

<%= form_for @project, :html => { :class => "form-horizontal project" } do |f| %>

  <% if @project.errors.any? %>
    <div id="error_expl" class="panel panel-danger">
      <div class="panel-heading">
        <h3 class="panel-title"><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h3>
      </div>
      <div class="panel-body">
        <ul>
        <% @project.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    </div>
  <% end %>

  <ul id = "progressbar">
    <li>Step 1 - General Information</li>
    <li>Step 2 - Project Information</li>
    <li>Step 3 - Additional Project Information</li>
  </ul>

<%=field_set_tag nil, class: 'fieldset_General_Project_Info' do %>

  <div class="control-group col-md-6">
    <%= f.label :project_name,'Project Name', :class => 'control-label' %>
    <div class="controls projectName ">
      <%= f.text_field :project_name, :class => 'form-control' %>
    </div>
    <%= error_span(@project[:project_name]) %>
  </div>

                  <div class="control-group col-md-6">
                    <%= f.label :project_status_id, 'Project Status', :class => 'control-label' %>
                    <div class="controls funabounds">
                      <%= f.collection_select :project_status_id,ProjectStatus.all, :id, :project_status_name,{}, :class => 'form-control' %>
                    </div>
                    <%= error_span(@project[:project_status_id]) %>
                  </div>

  <div class="control-group col-md-6">
    <%= f.label :project_budget, 'Project Budget', :class => 'control-label' %>
    <div class="controls projectBudget ">
      <%= f.text_field :project_budget, :class => 'form-control' %>
    </div>
    <%= error_span(@project[:project_budget]) %>
  </div>

                  <div class="control-group col-md-6">
                    <%= f.label :project_setting_id,'Project Setting',:class => 'control-label' %>
                    <div class="controls funabounds">
                      <%= f.collection_select :project_setting_id, ProjectSetting.all, :id, :project_setting_name,{}, :class => 'form-control ' %>
                    </div>
                    <%= error_span(@project[:project_setting_id]) %>
                  </div>


  <div class="control-group col-md-6">
    <%= f.label :start_date,'Start Date', :class => 'control-label' %>
    <div class="controls startDate">
      <%= f.text_field :start_date, :class => 'form-control datepicker' %>
    </div>
    <%= error_span(@project[:start_date]) %>
  </div>

                  <div class="control-group col-md-6">
                    <%= f.label :sales_person_id, 'Sales Person', :class => 'control-label' %>
                    <div class="controls funabounds">
                      <%= f.collection_select :sales_person_id, SalesPerson.all, :id, :sales_person_fullname, {}, :class => 'form-control' %>
                    </div>
                    <%= error_span(@project[:sales_person_id]) %>
                  </div>


  <div class=" control-group lastRow">
    <%= f.label :proposal_deadline, 'Proposal Deadline', :class => 'control-label' %>
    <div class="controls proposalDeadline">
      <%= f.text_field :proposal_deadline, :class => 'form-control datepicker' %>
    </div>
    <%= error_span(@project[:proposal_deadline]) %>

  </div>

                  <input type="button" name="next" class="next btn btn-default" value="Next"/>
                  <br>
                  <br>
                  <%= link_to t('.cancel', :default => t("helpers.links.cancel")), projects_path, :class => 'btn btn-default' %>

<% end %>


<%=field_set_tag nil, class: 'fieldset_Project_Info' do %>



  <div class="control-group col-md-6">
    <%= f.label :client_goal, 'Client Goal', :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :client_goal, :size => '10x6', :class => 'form-control' %>
    </div>
    <%= error_span(@project[:client_goal]) %>
  </div>

                  <div class="control-group col-md-6">
                    <%= f.label :mobilization_quantity, 'Mobilization Quantity', :class => 'control-label' %>
                    <div class="controls mobilizationQuantity">
                      <%= f.text_field :mobilization_quantity, :class => 'form-control' %>
                    </div>
                    <%= error_span(@project[:mobilization_quantity]) %>
                  </div>

<br>
                  <br>
  <div class="control-group col-md-6">
    <%= f.label :deal_type_id, 'Deal Type', :class => 'control-label' %>
    <div class="controls funabounds">
      <%= f.collection_select :deal_type_id, DealType.all, :id, :deal_type_name, {}, :class => 'form-control' %>
    </div>
    <%= error_span(@project[:deal_type_id]) %>
  </div>


                  <div class="control-group col-md-6">
                    <%= f.label :time_frame_description, 'Time Frame Description', :class => 'control-label' %>
                    <div class="controls">
                      <%= f.text_area :time_frame_description, size:'10x6', :class => 'form-control' %>
                    </div>
                    <%= error_span(@project[:time_frame_description]) %>
                  </div>

  <div class="control-group col-md-6">
    <%= f.label :deal_type_description, 'Deal Type Description', :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :deal_type_description, size: '10x6', :class => 'form-control' %>
    </div>
    <%= error_span(@project[:deal_type_description]) %>
  </div>

  <div class="control-group col-md-6">
    <%= f.label :procurement_tool_id, 'Procurement Tool', :class => 'control-label' %>
    <div class="controls funabounds">
      <%= f.collection_select :procurement_tool_id, ProcurementTool.all, :id, :procurement_tool_name, {}, :class => 'form-control' %>
    </div>
    <%= error_span(@project[:procurement_tool_id]) %>
  </div>


  <div class="control-group col-md-6">
    <%= f.label :irrigation_responsibility_id, 'Irrigation Responsibility', :class => 'control-label' %>
    <div class="controls funabounds">
      <%= f.collection_select :irrigation_responsibility_id, IrrigationResponsibility.all, :id, :irrigation_responsibility_name, {}, :class => 'form-control' %>
    </div>
    <%= error_span(@project[:irrigation_responsibility_id]) %>
  </div>
<br>


                  <br>
                  <br>
                  <input type="button" name="previous" class="previous btn btn-default" value="Previous" />
                  <input type="button" name="next" class="next btn btn-default" value="Next" />
                  <br>
                  <br>
                  <%= link_to t('.cancel', :default => t("helpers.links.cancel")), projects_path, :class => 'btn btn-default' %>

<% end %>


<%=field_set_tag nil, class: 'fieldset_Additional_Project_Info' do %>


  <div class="control-group">
    <%= f.label :restricted_work_hours,'Restricted Work Hours', :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :restricted_work_hours, :class => 'form-control' %>
    </div>
    <%= error_span(@project[:restricted_work_hours]) %>
  </div>

  <div class="control-group">
  <span class=" controls">
    <%= f.check_box(:liquidate_damages_yn, {}, 'true', 'false') %>
  </span>
    <%= f.label :liquidate_damages_yn, 'Liquidated Damages', :class => 'control-label' %>
    <%= error_span(@project[:liquidate_damages_yn]) %>
  </div>

  <div class="control-group">
    <span class="controls">
      <%= f.check_box(:prevailing_wages_certified_payroll_yn, {}, 'true', 'false')  %>
    </span>
    <%= f.label :prevailing_wages_certified_payroll_yn, 'Prevailing Wages Certified Payroll', :class => 'control-label' %>
    <%= error_span(@project[:prevailing_wages_certified_payroll_yn]) %>
  </div>

  <div class="control-group">
    <span class="controls">
    <%= f.check_box(:permit_special_inspection_in_possession, {}, 'true', 'false') %>
  </span>
    <%= f.label :permit_special_inspection_in_possession, 'Permit Special Inspection in Possession', :class => 'control-label' %>
    <%= error_span(@project[:permit_special_inspection_in_possession]) %>
  </div>



  <div class="control-group">
    <span class="controls">
      <%= f.check_box(:permit_submittal_required, {}, 'true', 'false' )  %>
    </span>
    <%= f.label :permit_submittal_required, 'Permit Submittal Required', :class => 'control-label' %>
    <%= error_span(@project[:permit_submittal_required]) %>
  </div>

  <div class="control-group">
    <span class="controls">
    <%= f.check_box(:permit_fees_required,{}, 'true' 'false' )   %>
  </span>
    <%= f.label :permit_fees_required, 'Permit Fees Required', :class => 'control-label' %>
    <%= error_span(@project[:permit_fees_required]) %>
  </div>
<br>


                  <br/>

                  <input type="button" name="previous" class="previous btn btn-default" value="Previous" />
                  <%= f.submit nil, :class => 'btn btn-primary' %>
        <br/>
        <br>
                  <%= link_to t('.cancel', :default => t("helpers.links.cancel")), projects_path, :class => 'btn btn-default' %>
<%end %>



              <!-- jQuery -->
              <script src="http://thecodeplayer.com/uploads/js/jquery-1.9.1.min.js" type="text/javascript"></script>
              <!-- jQuery easing plugin -->
              <script src="http://thecodeplayer.com/uploads/js/jquery.easing.min.js" type="text/javascript"></script>

              <script type="text/javascript">
                  //jQuery time
                  var current_fs, next_fs, previous_fs; //fieldsets
                  var left, opacity, scale; //fieldset properties which we will animate
                  var animating; //flag to prevent quick multi-click glitches

                  $(".next").click(function(){
                      if(animating) return false;
                      animating = true;

                      current_fs = $(this).parent();
                      next_fs = $(this).parent().next();

                      //activate next step on progressbar using the index of next_fs
                      $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

                      //show the next fieldset
                      next_fs.show();
                      //hide the current fieldset with style
                      current_fs.animate({opacity: 0}, {
                          step: function(now, mx) {
                              //as the opacity of current_fs reduces to 0 - stored in "now"
                              //1. scale current_fs down to 80%
                              scale = 1 - (1 - now) * 0.2;
                              //2. bring next_fs from the right(50%)
                              left = (now * 50)+"%";
                              //3. increase opacity of next_fs to 1 as it moves in
                              opacity = 1 - now;
                              current_fs.css({'transform': 'scale('+scale+')'});
                              next_fs.css({'left': left, 'opacity': opacity});
                          },
                          duration: 800,
                          complete: function(){
                              current_fs.hide();
                              animating = false;
                          },
                          //this comes from the custom easing plugin
                          easing: 'easeInOutBack'
                      });
                  });

                  $(".previous").click(function(){
                      if(animating) return false;
                      animating = true;

                      current_fs = $(this).parent();
                      previous_fs = $(this).parent().prev();

                      //de-activate current step on progressbar
                      $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

                      //show the previous fieldset
                      previous_fs.show();
                      //hide the current fieldset with style
                      current_fs.animate({opacity: 0}, {
                          step: function(now, mx) {
                              //as the opacity of current_fs reduces to 0 - stored in "now"
                              //1. scale previous_fs from 80% to 100%
                              scale = 0.8 + (1 - now) * 0.2;
                              //2. take current_fs to the right(50%) - from 0%
                              left = ((1-now) * 50)+"%";
                              //3. increase opacity of previous_fs to 1 as it moves in
                              opacity = 1 - now;
                              current_fs.css({'left': left});
                              previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});
                          },
                          duration: 800,
                          complete: function(){
                              current_fs.hide();
                              animating = false;
                          },
                          //this comes from the custom easing plugin
                          easing: 'easeInOutBack'
                      });
                  });

                  $(".submit").click(function(){
                      return false;
                  });
                  /**
                   * Created by Lawrence on 3/16/2015.
                   */

              </script>
<% end %>

        </div>
      </div>
    </div>
  </div>
</div>
</body>